{"remainingRequest":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!/home/qian/ysk/code/CTAI/CTAI_web/src/components/Content.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/qian/ysk/code/CTAI/CTAI_web/src/components/Content.vue","mtime":1602068999914},{"path":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qian/ysk/code/CTAI/CTAI_web/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.el-button {\n    padding: 12px 20px !important;\n}\n\n#hello p {\n    font-size: 15px !important;\n    /*line-height: 25px;*/\n}\n\n.n1 .el-step__description {\n    padding-right: 20%;\n    font-size: 14px;\n    line-height: 20px;\n    /* font-weight: 400; */\n}\n",{"version":3,"sources":["Content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsWA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Content.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"Content\">\n        <el-dialog\n            id=\"hello\"\n            title=\"图像描述系统使用须知\"\n            :visible.sync=\"centerDialogVisible\"\n            width=\"35%\"\n            font=\"SimSun\"\n            :before-close=\"handleClose\"\n        >\n            <el-steps :active=\"5\"  finish-status=\"process \">\n                <el-step title=\"步骤1\" style=\"width:280px;padding-left: 50px\">\n                    <template slot=\"description\">\n                        <p style=\"font-size: 16px\">上传图像至服务器</p>\n                        <br>\n                        <br>\n                    </template>\n                </el-step>\n                <el-step title=\"步骤2\" style=\"width:260px;margin-left:-5px;\">\n                    <template slot=\"description\">\n                        <p>使用训练的模型检测物体区域</p>\n                        <p>并生成文字描述</p>\n                       <br>\n                    </template>\n                </el-step>\n                <el-step title=\"步骤3\" style=\"width:260px;margin-left:-5px;\">\n                    <template slot=\"description\">\n                        <div>\n                            <p>可视化检测区域</p>\n                            <p>和文字描述</p>\n                            <br>\n                        </div>\n                    </template>\n                </el-step>\n            </el-steps>\n            <span slot=\"footer\" class=\"dialog-footer\">\n         <el-button type=\"primary\" @click=\"welcome\">开始体验</el-button>\n      </span>\n        </el-dialog>\n        <el-dialog\n            title=\"预测中\"\n            :visible.sync=\"dialogTableVisible\"\n            :show-close=\"false\"\n            :close-on-press-escape=\"false\"\n            :append-to-body=\"true\"\n            :close-on-click-modal=\"false\"\n            :center=\"true\"\n        >\n            <el-progress :percentage=\"percentage\"></el-progress>\n            <span slot=\"footer\" class=\"dialog-footer\">非GPU同学服务器性能有限，请耐心等待约一分钟</span>\n        </el-dialog>\n\n        <div id=\"aside\">\n            <!-- 查看病人信息 -->\n            <el-card class=\"box-card\" style=\"width:250px;height:350px;margin-left:-30px\" >\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>学生信息</span>\n                </div>\n                <div v-for=\"(value,name) in patient\" :key=\"name\" class=\"text item\">\n                    <h3 style=\"font-weight:normal;\">{{name}}:{{value}}</h3>\n                </div>\n            </el-card>\n\n            <!-- 步骤条：下载 上传 -->\n            <el-card\n                class=\"box-card\"\n                body-style=\"padding: 15px 5px 15px 10px\"\n                style=\"width:250px;height:500px;margin-top:150px;margin-left:-30px\"\n            >\n                <div slot=\"header\" class=\"clearfix\" style=\"text-align:center;\">\n                    <span class=\"steps\" style=\"letter-spacing: 7px;\">使用流程</span>\n                </div>\n                <div style=\"height: 600px;\" class=\"step_1\">\n                    <el-steps direction=\"vertical\" :active=\"active\" finish-status=\"success\">\n                        <el-step style=\"height: 120px;\" title=\"步骤 1\">\n                            <template slot=\"description\" style=\"font-size: 10px!important;\">\n                                上传图像至服务器\n                                <!-- 下载文件 -->\n                   \n                            </template>\n                        </el-step>\n                        <el-step style=\"height: 150px;\" title=\"步骤 2\">\n                            <template slot=\"description\">\n                                <!-- 上传文件 -->\n                                使用训练的模型检测物体区域并生成文字描述\n                                <input class=\"file\" name=\"file\" type=\"file\" @change=\"update\">\n                            </template>\n                        </el-step>\n\n                        <!-- 获得图像 -->\n                        <el-step title=\"可视化检测区域和文字描述\" style=\"height: 200px;\">\n                            <template slot=\"description\"></template>\n                        </el-step>\n                    </el-steps>\n                </div>\n            </el-card>\n        </div>\n        <!-- 上传返回信息部分：原CT图部分  标出肿瘤的CT图像 图像特征-->\n        <div id=\"CT\">\n            <!-- CT图像 -->\n            <div id=\"CT_image\">\n                <!-- 原CT图 -->\n                <el-card\n                    id=\"CT_image_1\"\n                    class=\"box-card\"\n                    style=\"border-radius: 25px;width:1800px;height:700px;margin-left:-450px;\"\n                >\n                    <div class=\"demo-image__preview1\">\n                        <div\n                            v-loading=\"loading\"\n                            element-loading-text=\"上传图片中\"\n                            element-loading-spinner=\"el-icon-loading\"\n                        >\n                            <el-image\n                                :src=\"url_1\"\n                                class=\"image_1\"\n                                :preview-src-list=\"srcList\"\n                                style=\"border-radius: 3px 3px 0 0\"\n                            >\n                                <div slot=\"error\">\n                                    <div slot=\"placeholder\" class=\"error\">\n                                        <el-button\n                                            v-show=\"showbutton\"\n                                            type=\"primary\"\n                                            icon=\"el-icon-upload\"\n                                            class=\"download_bt\"\n                                            v-on:click=\"true_upload\"\n                                        >\n                                            上传图片\n                                            <input\n                                                ref=\"upload\"\n                                                style=\"display: none\"\n                                                name=\"file\"\n                                                type=\"file\"\n                                                @change=\"update\"\n                                            >\n                                        </el-button>\n                                    </div>\n                                </div>\n                            </el-image>\n                        </div>\n                        <!-- 原CT图文字 -->\n                        <div class=\"img_info_1\" style=\"border-radius:0 0 5px 5px;\">\n                            <span style=\"color:white;letter-spacing:6px;\">原始图像</span>\n                        </div>\n                    </div>\n                    <!-- 标出肿瘤的CT图像 -->\n                    <div class=\"demo-image__preview2\">\n                        <div\n                            v-loading=\"loading\"\n                            element-loading-text=\"处理中,请耐心等待\"\n                            element-loading-spinner=\"el-icon-loading\"\n                        >\n                            <el-image\n                                :src=\"url_2\"\n                                class=\"image_2\"\n                                :preview-src-list=\"srcList1\"\n                                style=\"border-radius: 3px 3px 0 0;\"\n                            >\n                                <div slot=\"error\">\n                                    <div slot=\"placeholder\" class=\"error\">{{wait_return}}</div>\n                                </div>\n                            </el-image>\n                        </div>\n                        <!-- 标出肿瘤的CT图像文字 -->\n                        <div class=\"img_info_1\" style=\"border-radius: 0 0 5px 5px;\">\n                            <span style=\"color:white;letter-spacing:4px;\">标出检测区域的图像</span>\n                        </div>\n                    </div>\n                </el-card>\n            </div>\n\n\n            <!-- 分割线 -->\n\n            <!-- 图像特征部分 -->\n            <div id=\"info_patient\">\n                <!-- 卡片放置表格 -->\n                <el-card style=\"border-radius: 24px; width:1800px;height:300px;margin-top:-50px; margin-left:-450px\">\n                    <div slot=\"header\" class=\"clearfix\">\n                        <span>文字描述</span>\n                        <el-button\n                            style=\"margin-left: 35px\"\n                            v-show=\"!showbutton\"\n                            type=\"primary\"\n                            icon=\"el-icon-upload\"\n                            class=\"download_bt\"\n                            v-on:click=\"true_upload2\"\n                        >\n                            重新选择图像\n                            <input\n                                ref=\"upload2\"\n                                style=\"display: none\"\n                                name=\"file\"\n                                type=\"file\"\n                                @change=\"update\"\n                            >\n                        </el-button>\n                    </div>\n\n                    <textarea v-model=caption style=\"width:1700px;height:200px;margin-left:30px\" fontSize=100px;    v-loading=\"loading\"\n                                    element-loading-text=\"数据正在处理中，请耐心等待\"\n                                    element-loading-spinner=\"el-icon-loading\"></textarea>\n                \n                </el-card>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\";\n\n    export default {\n        name: \"Content\",\n        data() {\n            return {\n                // server_url:'http://58.87.66.50:5003',\n                server_url:'http://127.0.0.1:5000',\n                perimeter_picture_data: 0,\n                area_picture_data: 0,\n                activeName: \"first\",\n                active: 0,\n                centerDialogVisible: true,\n                url_1: \"\",\n                url_2: \"\",\n                textarea: \"\",\n                srcList: [],\n                srcList1: [],\n                feature_list: [],\n                feature_list_1: [],\n                feat_list: [],\n                url: \"\",\n                caption: \"\",\n                visible: false,\n                activeName: \"second\",\n                wait_return: \"等待上传\",\n                wait_upload: \"等待上传\",\n                loading: false,\n                table: false,\n                isNav: false,\n                showbutton: true,\n                percentage: 0,\n                fullscreenLoading: false,\n                opacitys: {\n                    opacity: 0\n                },\n                dialogTableVisible: false,\n                patient: {\n                    姓名: \"杨少康\",\n                    学号: \"zy1806712\",\n                    导师: \"牛建伟\",\n                }\n            };\n        },\n        created: function () {\n            document.title = '图像描述演示系统';\n        },\n        methods: {\n            true_upload() {\n                this.$refs.upload.click();\n            },\n            true_upload2() {\n                this.$refs.upload2.click();\n            },\n            handleClose(done) {\n                this.$confirm(\"确认关闭？\")\n                    .then(_ => {\n                        done();\n                    })\n                    .catch(_ => {\n                    });\n            },\n            next() {\n                this.active++;\n            },\n            // 获得目标文件\n            getObjectURL(file) {\n                var url = null;\n                if (window.createObjcectURL != undefined) {\n                    url = window.createOjcectURL(file);\n                } else if (window.URL != undefined) {\n                    url = window.URL.createObjectURL(file);\n                } else if (window.webkitURL != undefined) {\n                    url = window.webkitURL.createObjectURL(file);\n                }\n                return url;\n            },   \n            // 上传文件\n            update(e) {\n                this.percentage = 0;\n                this.dialogTableVisible = true;\n                this.url_1 = \"\";\n                this.url_2 = \"\";\n                this.srcList = [];\n                this.srcList1 = [];\n                this.wait_return = \"\";\n                this.wait_upload = \"\";\n                this.feature_list = [];\n          \n                this.feat_list = [];\n                this.fullscreenLoading = true;\n                this.loading = true;\n                this.showbutton = false;\n                let file = e.target.files[0];\n                this.url_1 = this.$options.methods.getObjectURL(file);\n                let param = new FormData(); //创建form对象\n                param.append(\"file\", file, file.name); //通过append向form对象添加数据\n                // console.log(param.get(\"file\")); //FormData私有类对象，访问不到，可以通过get判断值是否传进去\n                //todo aaaa\n                var timer = setInterval(() => {\n                    this.myFunc();\n                }, 30);\n                let config = {\n                    headers: {\"Content-Type\": \"multipart/form-data\"}\n                }; //添加请求头\n                axios\n                    .post(this.server_url+\"/upload\", param, config)\n                    .then(response => {\n                        console.log(\"+++\")\n                        this.percentage = 100;\n                        clearInterval(timer);\n                        this.url_1 = response.data.image_url;\n                        this.srcList.push(this.url_1);\n                        this.url_2 = response.data.draw_url;\n                        this.srcList1.push(this.url_2);\n                        this.fullscreenLoading = false;\n                        this.dialogTableVisible = false;\n                        this.feat_list = Object.keys(response.data.image_info);\n                        this.caption = response.data.image_info['caption']\n                        this.loading = false;\n                        console.log(response.data.image_info['caption'])\n                        console.log('this.featureslist',this.feat_list)\n              \n                    });\n            },\n   \n            myFunc() {\n                if (this.percentage + 33 < 99) {\n                    this.percentage = this.percentage + 33;\n                    console.log(this.percentage);\n                } else {\n                    this.percentage = 99;\n                }\n            },\n     \n            welcome() {\n                this.centerDialogVisible = false;\n                this.next();\n             \n            },\n   \n        },\n\n    };\n</script>\n\n<style>\n    .el-button {\n        padding: 12px 20px !important;\n    }\n\n    #hello p {\n        font-size: 15px !important;\n        /*line-height: 25px;*/\n    }\n\n    .n1 .el-step__description {\n        padding-right: 20%;\n        font-size: 14px;\n        line-height: 20px;\n        /* font-weight: 400; */\n    }\n</style>\n\n<style scoped>\n    * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n    }\n\n    .dialog_info {\n        margin: 20px auto;\n    }\n\n    .text {\n        font-size: 14px;\n    }\n\n    .item {\n        margin-bottom: 18px;\n    }\n\n    .clearfix:before,\n    .clearfix:after {\n        display: table;\n        content: \"\";\n    }\n\n    .clearfix:after {\n        clear: both;\n    }\n\n    .box-card {\n        width: 680px;\n        height: 200px;\n        border-radius: 25px;\n        margin-top: -20px;\n    }\n\n    .divider {\n        width: 50%;\n    }\n\n    #CT {\n        display: flex;\n        height: 100%;\n        width: 70%;\n        flex-wrap: wrap;\n        justify-content: center;\n        margin: 0 auto;\n        margin-right: 0px;\n        max-width: 1200px;\n        /* background-color: RGB(239, 249, 251); */\n        /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04); */\n    }\n\n    #CT_image_1 {\n        width: 90%;\n        height: 40%;\n        /* background-color: RGB(239, 249, 251); */\n        margin: 0px auto;\n        padding: 0px auto;\n        /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04); */\n        margin-right: 180px;\n        margin-bottom: 0px;\n        border-radius: 25px;\n    }\n\n    #CT_image {\n        margin-bottom: 60px;\n        margin-left: 30px;\n        margin-top: 5px;\n    }\n\n    .image_1 {\n        width: 800px;\n        height: 600px;\n        background: #ffffff;\n        box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    }\n    .image_2 {\n        width: 800px;\n        height: 600px;\n        background: #ffffff;\n        box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .img_info_1 {\n        height: 30px;\n        width: 800px;\n        text-align: center;\n        background-color: #21b3b9;\n        line-height: 30px;\n    }\n\n    .demo-image__preview1 {\n        width: 800px;\n        height: 290px;\n        margin: -5px 20px;\n        float: left;\n    }\n\n    .demo-image__preview2 {\n        width: 800px;\n        height: 290px;\n\n        margin: -5px 900px;\n        /* background-color: green; */\n    }\n\n    .error {\n        margin: 200px auto;\n        width: 50%;\n        padding: 10px;\n        text-align: center;\n    }\n\n    .block-sidebar {\n        position: fixed;\n        display: none;\n        left: 50%;\n        margin-left: 600px;\n        top: 350px;\n        width: 60px;\n        z-index: 99;\n    }\n\n    .block-sidebar .block-sidebar-item {\n        font-size: 50px;\n        color: lightblue;\n        text-align: center;\n        line-height: 50px;\n        margin-bottom: 20px;\n        cursor: pointer;\n        display: block;\n    }\n\n    div {\n        display: block;\n    }\n\n    .block-sidebar .block-sidebar-item:hover {\n        color: #187aab;\n    }\n\n    .download_bt {\n        padding: 10px 16px !important;\n    }\n\n    #upfile {\n        width: 104px;\n        height: 45px;\n        background-color: #187aab;\n        color: #fff;\n        text-align: center;\n        line-height: 45px;\n        border-radius: 3px;\n        box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n        color: #fff;\n        font-family: \"Source Sans Pro\", Verdana, sans-serif;\n        font-size: 0.875rem;\n    }\n\n    .file {\n        width: 200px;\n        height: 130px;\n        position: absolute;\n        left: -20px;\n        top: 0;\n        z-index: 1;\n        -moz-opacity: 0;\n        -ms-opacity: 0;\n        -webkit-opacity: 0;\n        opacity: 0; /*css属性&mdash;&mdash;opcity不透明度，取值0-1*/\n        filter: alpha(opacity=0);\n        cursor: pointer;\n    }\n\n    #upload {\n        position: relative;\n        margin: 0px 0px;\n    }\n\n    #download {\n        padding: 0px;\n        margin: 0px 0px;\n    }\n\n    .patient {\n        margin: 50px auto;\n        margin-bottom: 100px;\n        /* margin-right: 100px; */\n        background-color: #187aab;\n        border-radius: 5px;\n        box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n        color: #fff;\n        font-family: \"Source Sans Pro\", Verdana, sans-serif;\n        font-size: 0.875rem;\n        line-height: 1;\n        padding: 0.75rem 1.5rem;\n    }\n\n    #Content {\n        width: 85%;\n        height: 800px;\n        background-color: #ffffff;\n        margin: 15px auto;\n        display: flex;\n        min-width: 1200px;\n        /* border: 1px solid #e4e7ed; */\n        /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04); */\n    }\n\n    #aside {\n        width: 25%;\n        background-color: #ffffff;\n        padding: 30px;\n        margin-right: 80px;\n        /* background-color: RGB(239, 249, 251); */\n        /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04); */\n        height: 800px;\n    }\n\n    .divider {\n        background-color: #eaeaea !important;\n        height: 2px !important;\n        width: 100%;\n        margin-bottom: 50px;\n    }\n\n    .divider_1 {\n        background-color: #ffffff;\n        height: 2px !important;\n        width: 100%;\n        margin-bottom: 20px;\n        margin: 20px auto;\n    }\n\n    .steps {\n        font-family: \"lucida grande\", \"lucida sans unicode\", lucida, helvetica,\n        \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif;\n        color: #21b3b9;\n        text-align: center;\n        margin: 15px auto;\n        font-size: 20px;\n        font-weight: bold;\n        text-align: center;\n    }\n\n    .step_1 {\n        /*color: #303133 !important;*/\n        margin: 20px 26px;\n    }\n\n    #info_patient {\n        margin-top: 10px;\n        margin-right: 160px;\n    }\n</style>\n\n\n"]}]}